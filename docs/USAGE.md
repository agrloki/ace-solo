/**
 * @file: USAGE.md
 * @description: Подробное руководство по использованию автономного приложения ace-solo.
 * @dependencies: ace-solo/cli.py, ace-solo/config.ini
 * @created: 2025-11-14
 */

# Руководство по использованию `ace-solo`

## Введение

`ace-solo` — это автономное приложение для управления устройством ValgACE, позволяющее выполнять основные операции с филаментом, такие как подача, откат, парковка и мониторинг состояния устройства через командную строку (CLI).

## Установка

Для установки `ace-solo` и всех необходимых зависимостей, выполните следующую команду в корневой директории проекта:

```bash
pip install -r ace-solo/requirements.txt
```

## Конфигурация

Конфигурация `ace-solo` находится в файле `ace-solo/config.ini`. Ниже приведено описание каждого параметра.

```ini
[serial]
port = /dev/serial/by-id/usb-1a86_USB_Serial-if00-port0
baud = 115200

[defaults]
feed_speed = 20
retract_speed = 30
park_hit_count = 2
max_dryer_temperature = 55
```

-   **`port`**: Путь к последовательному порту, к которому подключено устройство ACE.
-   **`baud`**: Скорость передачи данных для последовательного соединения.
-   **`feed_speed`**: Скорость подачи филамента по умолчанию (в мм/с).
-   **`retract_speed`**: Скорость отката филамента по умолчанию (в мм/с).
-   **`park_hit_count`**: Количество "ударов" при парковке.
-   **`max_dryer_temperature`**: Максимальная температура для сушки филамента.

## Использование (CLI)

Все команды выполняются через модуль `ace_solo`.

**Общий формат вызова:** `python ace-solo/main.py [COMMAND] [ARGS]`

### Основные команды

-   **`status`**
    -   **Назначение:** Получить текущий статус устройства ACE.
    -   **Пример:**
        ```bash
        python ace-solo/main.py status
        ```

-   **`filament_info`**
    -   **Назначение:** Получить информацию о филаменте в указанном слоте.
    -   **Аргументы:** `SLOT` (целое число) - номер слота.
    -   **Пример:**
        ```bash
        python ace-solo/main.py filament_info 0
        ```

### Команды управления филаментом

-   **`park_to_toolhead`**
    -   **Назначение:** Запарковать филамент из указанного слота в печатающую головку.
    -   **Аргументы:** `SLOT` (целое число) - номер слота.
    -   **Пример:**
        ```bash
        python ace-solo/main.py park_to_toolhead 0
        ```

-   **`feed`**
    -   **Назначение:** Подать указанную длину филамента с заданной скоростью.
    -   **Аргументы:**
        -   `SLOT` (целое число) - номер слота.
        -   `LENGTH` (число с плавающей точкой) - длина подачи в мм.
        -   `SPEED` (целое число) - скорость подачи в мм/с.
    -   **Пример:**
        ```bash
        python ace-solo/main.py feed 0 100.0 20
        ```

-   **`retract`**
    -   **Назначение:** Откатить указанную длину филамента с заданной скоростью.
    -   **Аргументы:**
        -   `SLOT` (целое число) - номер слота.
        -   `LENGTH` (число с плавающей точкой) - длина отката в мм.
        -   `SPEED` (целое число) - скорость отката в мм/с.
    -   **Пример:**
        ```bash
        python ace-solo/main.py retract 0 50.0 30
        ```

-   **`stop_feed`**
    -   **Назначение:** Остановить процесс подачи филамента.
    -   **Аргументы:** `SLOT` (целое число) - номер слота.
    -   **Пример:**
        ```bash
        python ace-solo/main.py stop_feed 0
        ```

-   **`stop_retract`**
    -   **Назначение:** Остановить процесс отката филамента.
    -   **Аргументы:** `SLOT` (целое число) - номер слота.
    -   **Пример:**
        ```bash
        python ace-solo/main.py stop_retract 0
        ```

### Команды настройки

-   **`update_feed_speed`**
    -   **Назначение:** Обновить скорость подачи филамента.
    -   **Аргументы:**
        -   `SLOT` (целое число) - номер слота.
        -   `SPEED` (целое число) - новая скорость в мм/с.
    -   **Пример:**
        ```bash
        python ace-solo/main.py update_feed_speed 0 25
        ```

-   **`update_retract_speed`**
    -   **Назначение:** Обновить скорость отката филамента.
    -   **Аргументы:**
        -   `SLOT` (целое число) - номер слота.
        -   `SPEED` (целое число) - новая скорость в мм/с.
    -   **Пример:**
        ```bash
        python ace-solo/main.py update_retract_speed 0 35
        ```

-   **`enable_feed_assist`**
    -   **Назначение:** Включить помощь при подаче.
    -   **Аргументы:** `SLOT` (целое число) - номер слота.
    -   **Пример:**
        ```bash
        python ace-solo/main.py enable_feed_assist 0
        ```

-   **`disable_feed_assist`**
    -   **Назначение:** Выключить помощь при подаче.
    -   **Аргументы:** `SLOT` (целое число) - номер слота.
    -   **Пример:**
        ```bash
        python ace-solo/main.py disable_feed_assist 0
        ```

### Команды сушки

-   **`start_drying`**
    -   **Назначение:** Запустить процесс сушки филамента.
    -   **Аргументы:**
        -   `TEMP` (целое число) - температура сушки.
        -   `DURATION` (целое число) - продолжительность в минутах.
    -   **Пример:**
        ```bash
        python ace-solo/main.py start_drying 55 120
        ```

-   **`stop_drying`**
    -   **Назначение:** Остановить процесс сушки.
    -   **Пример:**
        ```bash
        python ace-solo/main.py stop_drying
        ```

### Отладка

-   **`debug_send`**
    -   **Назначение:** Отправить сырую команду на устройство для отладки.
    -   **Аргументы:** `COMMAND_STRING` (строка) - команда для отправки.
    -   **Пример:**
        ```bash
        python ace-solo/main.py debug_send "M105"
        ```

## Пример рабочего процесса

Вот типичный сценарий использования `ace-solo` для загрузки нового филамента:

1.  **Проверить статус устройства:**
    ```bash
    python ace-solo/main.py status
    ```

2.  **Запарковать филамент из слота 0 в печатающую головку:**
    ```bash
    python ace-solo/main.py park_to_toolhead 0
    ```

3.  **Подать 50 мм филамента для его выхода из сопла:**
    ```bash
    python ace-solo/main.py feed 0 50.0 20
    ```
